<Project>
  <!-- Pick the right task assembly for the running host.
       Full = MSBuild on .NET Framework (Visual Studio).
       Core = MSBuild on .NET (dotnet CLI). -->
  <UsingTask
    Condition="'$(MSBuildRuntimeType)' == 'Full'"
    TaskName="Xml2Doc.MSBuild.GenerateDocs"
    AssemblyFile="$(MSBuildThisFileDirectory)..\tools\net472\Xml2Doc.MSBuild.dll" />

  <UsingTask
    Condition="'$(MSBuildRuntimeType)' != 'Full'"
    TaskName="Xml2Doc.MSBuild.GenerateDocs"
    AssemblyFile="$(MSBuildThisFileDirectory)..\tools\net8.0\Xml2Doc.MSBuild.dll" />

  <!-- Run after successful build; skip if user opts out -->
  <Target Name="Xml2Doc_Generate" AfterTargets="Build"
          Condition="'$(Xml2Doc_Enabled)' == 'true' and Exists('$(DocumentationFile)')">
    <Xml2Doc.MSBuild.GenerateDocs
      Xml="$(DocumentationFile)"
      OutputDir="$(Xml2Doc_OutputDir)"
      SingleFile="$(Xml2Doc_SingleFile)"
      OutputFile="$(Xml2Doc_OutputFile)"
      FileNameMode="$(Xml2Doc_FileNameMode)"
      RootNamespaceToTrim="$(Xml2Doc_RootNamespaceToTrim)"
      CodeBlockLanguage ="$(Xml2Doc_CodeBlockLanguage)" />
  </Target>
</Project>
